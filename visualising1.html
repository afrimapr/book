<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Visualising spatial data part 1: tmap and mapview | The afrimapr book</title>
  <meta name="description" content="An introduction to making maps from African data in R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Visualising spatial data part 1: tmap and mapview | The afrimapr book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to making maps from African data in R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Visualising spatial data part 1: tmap and mapview | The afrimapr book" />
  
  <meta name="twitter:description" content="An introduction to making maps from African data in R." />
  

<meta name="author" content="The afrimapr team" />


<meta name="date" content="2021-04-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-types.html"/>
<link rel="next" href="shiny.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The afrimapr book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#spatial-data-outline"><i class="fa fa-check"></i><b>1.1</b> Spatial data outline</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="steps1.html"><a href="steps1.html"><i class="fa fa-check"></i><b>2</b> Step through a simple example of process of mapmaking</a></li>
<li class="chapter" data-level="3" data-path="rrecap.html"><a href="rrecap.html"><i class="fa fa-check"></i><b>3</b> R recap</a><ul>
<li class="chapter" data-level="" data-path="rrecap.html"><a href="rrecap.html#list-of-episodes"><i class="fa fa-check"></i>List of episodes</a></li>
<li class="chapter" data-level="3.1" data-path="rrecap.html"><a href="rrecap.html#wd"><i class="fa fa-check"></i><b>3.1</b> Setting working directory</a></li>
<li class="chapter" data-level="3.2" data-path="rrecap.html"><a href="rrecap.html#new_script"><i class="fa fa-check"></i><b>3.2</b> Creating, naming and saving a new R script</a></li>
<li class="chapter" data-level="3.3" data-path="rrecap.html"><a href="rrecap.html#executing"><i class="fa fa-check"></i><b>3.3</b> Executing the code</a></li>
<li class="chapter" data-level="3.4" data-path="rrecap.html"><a href="rrecap.html#install_packages"><i class="fa fa-check"></i><b>3.4</b> Install and load packages</a></li>
<li class="chapter" data-level="3.5" data-path="rrecap.html"><a href="rrecap.html#load_data"><i class="fa fa-check"></i><b>3.5</b> Load data</a></li>
<li class="chapter" data-level="3.6" data-path="rrecap.html"><a href="rrecap.html#data_basics"><i class="fa fa-check"></i><b>3.6</b> Basic data types</a><ul>
<li class="chapter" data-level="3.6.1" data-path="rrecap.html"><a href="rrecap.html#numeric-and-integer"><i class="fa fa-check"></i><b>3.6.1</b> Numeric and integer</a></li>
<li class="chapter" data-level="3.6.2" data-path="rrecap.html"><a href="rrecap.html#characters"><i class="fa fa-check"></i><b>3.6.2</b> Characters</a></li>
<li class="chapter" data-level="3.6.3" data-path="rrecap.html"><a href="rrecap.html#logical"><i class="fa fa-check"></i><b>3.6.3</b> Logical</a></li>
<li class="chapter" data-level="3.6.4" data-path="rrecap.html"><a href="rrecap.html#factors"><i class="fa fa-check"></i><b>3.6.4</b> Factors</a></li>
<li class="chapter" data-level="3.6.5" data-path="rrecap.html"><a href="rrecap.html#exercises"><i class="fa fa-check"></i><b>3.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rrecap.html"><a href="rrecap.html#objects_basics"><i class="fa fa-check"></i><b>3.7</b> Basic objects and data structures</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rrecap.html"><a href="rrecap.html#vector"><i class="fa fa-check"></i><b>3.7.1</b> Vector</a></li>
<li class="chapter" data-level="3.7.2" data-path="rrecap.html"><a href="rrecap.html#matrix"><i class="fa fa-check"></i><b>3.7.2</b> Matrix</a></li>
<li class="chapter" data-level="3.7.3" data-path="rrecap.html"><a href="rrecap.html#data-frame"><i class="fa fa-check"></i><b>3.7.3</b> Data frame</a></li>
<li class="chapter" data-level="3.7.4" data-path="rrecap.html"><a href="rrecap.html#exercises-1"><i class="fa fa-check"></i><b>3.7.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="rrecap.html"><a href="rrecap.html#help"><i class="fa fa-check"></i><b>3.8</b> Getting help with R Help</a></li>
<li class="chapter" data-level="3.9" data-path="rrecap.html"><a href="rrecap.html#further-resources"><i class="fa fa-check"></i><b>3.9</b> Further resources</a></li>
<li class="chapter" data-level="3.10" data-path="rrecap.html"><a href="rrecap.html#wrap-up"><i class="fa fa-check"></i><b>3.10</b> Wrap up</a></li>
<li class="chapter" data-level="3.11" data-path="rrecap.html"><a href="rrecap.html#solutions_ch3"><i class="fa fa-check"></i><b>3.11</b> Exercise solutions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>4</b> Spatial data types with focus on real examples</a><ul>
<li class="chapter" data-level="4.1" data-path="data-types.html"><a href="data-types.html#overall-goal-of-the-chapter"><i class="fa fa-check"></i><b>4.1</b> Overall goal of the chapter</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-types.html"><a href="data-types.html#list-of-episodes-1"><i class="fa fa-check"></i><b>4.1.1</b> List of episodes</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-types.html"><a href="data-types.html#episode_1_points"><i class="fa fa-check"></i><b>4.2</b> Points</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-types.html"><a href="data-types.html#example"><i class="fa fa-check"></i><b>4.2.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-types.html"><a href="data-types.html#episode_2_lines"><i class="fa fa-check"></i><b>4.3</b> Lines</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data-types.html"><a href="data-types.html#example-1"><i class="fa fa-check"></i><b>4.3.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-types.html"><a href="data-types.html#episode_3_polygons"><i class="fa fa-check"></i><b>4.4</b> Polygons</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data-types.html"><a href="data-types.html#example-2"><i class="fa fa-check"></i><b>4.4.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-types.html"><a href="data-types.html#episode_4_raster"><i class="fa fa-check"></i><b>4.5</b> Rasters</a><ul>
<li class="chapter" data-level="4.5.1" data-path="data-types.html"><a href="data-types.html#example-3"><i class="fa fa-check"></i><b>4.5.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data-types.html"><a href="data-types.html#summarykey-points"><i class="fa fa-check"></i><b>4.6</b> Summary/key points</a></li>
<li class="chapter" data-level="4.7" data-path="data-types.html"><a href="data-types.html#further-resources-1"><i class="fa fa-check"></i><b>4.7</b> Further resources</a></li>
<li class="chapter" data-level="4.8" data-path="data-types.html"><a href="data-types.html#feedback"><i class="fa fa-check"></i><b>4.8</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualising1.html"><a href="visualising1.html"><i class="fa fa-check"></i><b>5</b> Visualising spatial data part 1: tmap and mapview</a><ul>
<li class="chapter" data-level="5.1" data-path="visualising1.html"><a href="visualising1.html#overall-goal-of-the-chapter-1"><i class="fa fa-check"></i><b>5.1</b> Overall goal of the chapter</a></li>
<li class="chapter" data-level="5.2" data-path="visualising1.html"><a href="visualising1.html#quick-interactive-maps-with-mapview"><i class="fa fa-check"></i><b>5.2</b> Quick interactive maps with mapview</a><ul>
<li class="chapter" data-level="5.2.1" data-path="visualising1.html"><a href="visualising1.html#exercises-2"><i class="fa fa-check"></i><b>5.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="visualising1.html"><a href="visualising1.html#static-maps-with-tmap"><i class="fa fa-check"></i><b>5.3</b> Static maps with tmap</a><ul>
<li class="chapter" data-level="5.3.1" data-path="visualising1.html"><a href="visualising1.html#colour-setting-and-colour-pallete"><i class="fa fa-check"></i><b>5.3.1</b> Colour setting and colour pallete</a></li>
<li class="chapter" data-level="5.3.2" data-path="visualising1.html"><a href="visualising1.html#visualising-different-datasets-in-one-map"><i class="fa fa-check"></i><b>5.3.2</b> Visualising different datasets in one map</a></li>
<li class="chapter" data-level="5.3.3" data-path="visualising1.html"><a href="visualising1.html#exercises-3"><i class="fa fa-check"></i><b>5.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="visualising1.html"><a href="visualising1.html#interactive-maps-with-tmap"><i class="fa fa-check"></i><b>5.4</b> Interactive maps with tmap</a><ul>
<li class="chapter" data-level="5.4.1" data-path="visualising1.html"><a href="visualising1.html#visualising-subsets-of-data"><i class="fa fa-check"></i><b>5.4.1</b> Visualising subsets of data</a></li>
<li class="chapter" data-level="5.4.2" data-path="visualising1.html"><a href="visualising1.html#exercises-4"><i class="fa fa-check"></i><b>5.4.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="visualising1.html"><a href="visualising1.html#further-resources-2"><i class="fa fa-check"></i><b>5.5</b> Further resources</a></li>
<li class="chapter" data-level="5.6" data-path="visualising1.html"><a href="visualising1.html#solutions_ch5"><i class="fa fa-check"></i><b>5.6</b> Exercise solutions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>6</b> Shiny interactive map applications</a></li>
<li class="chapter" data-level="7" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>7</b> Sources of data</a><ul>
<li class="chapter" data-level="7.0.1" data-path="data-sources.html"><a href="data-sources.html#hdx"><i class="fa fa-check"></i><b>7.0.1</b> HDX</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="joining.html"><a href="joining.html"><i class="fa fa-check"></i><b>8</b> Join non-spatial data onto spatial</a></li>
<li class="chapter" data-level="9" data-path="raster.html"><a href="raster.html"><i class="fa fa-check"></i><b>9</b> Raster manipulation</a></li>
<li class="chapter" data-level="10" data-path="openstreetmap.html"><a href="openstreetmap.html"><i class="fa fa-check"></i><b>10</b> OpenStreetMap data</a></li>
<li class="chapter" data-level="11" data-path="data-editing.html"><a href="data-editing.html"><i class="fa fa-check"></i><b>11</b> Creating and editing spatial data</a><ul>
<li class="chapter" data-level="11.1" data-path="data-editing.html"><a href="data-editing.html#create-a-vector-file-from-scratch"><i class="fa fa-check"></i><b>11.1</b> Create a vector file from scratch</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising2.html"><a href="visualising2.html"><i class="fa fa-check"></i><b>12</b> Visualising spatial data part 2</a></li>
<li class="chapter" data-level="13" data-path="case-study1.html"><a href="case-study1.html"><i class="fa fa-check"></i><b>13</b> Case study 1</a><ul>
<li class="chapter" data-level="13.1" data-path="case-study1.html"><a href="case-study1.html#health-facility-locations-probably"><i class="fa fa-check"></i><b>13.1</b> Health facility locations (probably)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="case-study2.html"><a href="case-study2.html"><i class="fa fa-check"></i><b>14</b> Case study 2</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="15" data-path="template.html"><a href="template.html"><i class="fa fa-check"></i><b>15</b> Template chapter</a><ul>
<li class="chapter" data-level="15.1" data-path="template.html"><a href="template.html#linking-section-1"><i class="fa fa-check"></i><b>15.1</b> Linking section 1</a></li>
<li class="chapter" data-level="15.2" data-path="template.html"><a href="template.html#overall-goal-of-the-chapter-2"><i class="fa fa-check"></i><b>15.2</b> Overall goal of the chapter</a><ul>
<li class="chapter" data-level="" data-path="template.html"><a href="template.html#list-of-episodes-2"><i class="fa fa-check"></i>List of episodes</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="template.html"><a href="template.html#episode_1_template"><i class="fa fa-check"></i><b>15.3</b> Episode 1 (topic 1)</a></li>
<li class="chapter" data-level="15.4" data-path="template.html"><a href="template.html#episode_2_template"><i class="fa fa-check"></i><b>15.4</b> Episode 2 (topic 2)</a></li>
<li class="chapter" data-level="15.5" data-path="template.html"><a href="template.html#episode_3_template"><i class="fa fa-check"></i><b>15.5</b> Episode 3 (topic 3)</a></li>
<li class="chapter" data-level="15.6" data-path="template.html"><a href="template.html#further-resources-3"><i class="fa fa-check"></i><b>15.6</b> Further resources</a></li>
<li class="chapter" data-level="15.7" data-path="template.html"><a href="template.html#wrap-up-1"><i class="fa fa-check"></i><b>15.7</b> Wrap up</a></li>
<li class="chapter" data-level="15.8" data-path="template.html"><a href="template.html#exercise-solutions"><i class="fa fa-check"></i><b>15.8</b> Exercise solutions</a></li>
<li class="chapter" data-level="15.9" data-path="template.html"><a href="template.html#feedback-1"><i class="fa fa-check"></i><b>15.9</b> Feedback</a></li>
<li class="chapter" data-level="15.10" data-path="template.html"><a href="template.html#putting-into-practice"><i class="fa fa-check"></i><b>15.10</b> Putting into practice</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/afrimapr/book" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The afrimapr book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualising1" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Visualising spatial data part 1: tmap and mapview</h1>
<div id="overall-goal-of-the-chapter-1" class="section level2">
<h2><span class="header-section-number">5.1</span> Overall goal of the chapter</h2>
<p>In the previous section we explored different types of spatial data and looked at how these can be used to create a map. In this section we will use <code>tmap</code> and <code>mapview</code> packages to crate both static and interactive maps. In particular, we will focus on the goals presented below.</p>
<style>
div.green { background-color:#e3ffd9; border-radius: 5px; padding: 20px;}
</style>
<div class="green">
<h3 id="learning-objectives-6" class="unnumbered">Learning objectives</h3>
<ul>
<li>Create static and interactive maps using different packages</li>
<li>Learn function structure to build more advanced maps</li>
<li>Analyse the differences between used packages and identify their applicability for various purposes</li>
</ul>
</div>
<p>This chapter requires the following packages (some of them we used already):</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="visualising1.html#cb100-1"></a>cran_packages_to_install &lt;-<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb100-2"><a href="visualising1.html#cb100-2"></a>  <span class="st">&quot;mapview&quot;</span>,           <span class="co"># map-making package for interactive maps</span></span>
<span id="cb100-3"><a href="visualising1.html#cb100-3"></a>  <span class="st">&quot;tmap&quot;</span>,              <span class="co"># map-making package for static and interactive maps</span></span>
<span id="cb100-4"><a href="visualising1.html#cb100-4"></a>  <span class="st">&quot;tidyverse&quot;</span>,         <span class="co"># metapackage containing dplyr, ggplot2 and other packages</span></span>
<span id="cb100-5"><a href="visualising1.html#cb100-5"></a>  <span class="st">&quot;sf&quot;</span>,                <span class="co"># package for working with spatial data</span></span>
<span id="cb100-6"><a href="visualising1.html#cb100-6"></a>  <span class="st">&quot;rnaturalearth&quot;</span>,     <span class="co"># data package</span></span>
<span id="cb100-7"><a href="visualising1.html#cb100-7"></a>  <span class="st">&quot;rnaturalearthdata&quot;</span>, <span class="co"># data package</span></span>
<span id="cb100-8"><a href="visualising1.html#cb100-8"></a>  <span class="st">&quot;tmaptools&quot;</span>          <span class="co"># map building package</span></span>
<span id="cb100-9"><a href="visualising1.html#cb100-9"></a>  )</span>
<span id="cb100-10"><a href="visualising1.html#cb100-10"></a><span class="kw">install.packages</span>(cran_packages_to_install)</span>
<span id="cb100-11"><a href="visualising1.html#cb100-11"></a></span>
<span id="cb100-12"><a href="visualising1.html#cb100-12"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;afrimapr/afrilearndata&quot;</span>)</span></code></pre></div>
<p>Next, we need to load the packages:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="visualising1.html#cb101-1"></a><span class="kw">library</span>(tmap)</span>
<span id="cb101-2"><a href="visualising1.html#cb101-2"></a><span class="kw">library</span>(mapview)</span>
<span id="cb101-3"><a href="visualising1.html#cb101-3"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb101-4"><a href="visualising1.html#cb101-4"></a><span class="kw">library</span>(sf)</span>
<span id="cb101-5"><a href="visualising1.html#cb101-5"></a><span class="kw">library</span>(afrilearndata)</span>
<span id="cb101-6"><a href="visualising1.html#cb101-6"></a><span class="kw">library</span>(rnaturalearth)</span>
<span id="cb101-7"><a href="visualising1.html#cb101-7"></a><span class="kw">library</span>(rnaturalearthdata)</span>
<span id="cb101-8"><a href="visualising1.html#cb101-8"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb101-9"><a href="visualising1.html#cb101-9"></a><span class="kw">library</span>(tmaptools)</span></code></pre></div>
</div>
<div id="quick-interactive-maps-with-mapview" class="section level2">
<h2><span class="header-section-number">5.2</span> Quick interactive maps with mapview</h2>
<p><code>Mapview package</code> allows quickly and easily create interactive maps of spatial data. Therefore, it is useful when we want to quickly explore the data visually without excessive care about the quality of the presentation. However, if we need static maps or interactive maps which are more elaborate we might want to consider other options such as <code>tmap package</code> which will be presented later in this chapter.<br/></p>
<p>The typical spatial objects types supported by <code>mapview</code> package are:</p>
<ul>
<li>sf</li>
<li>raster</li>
<li>sp</li>
</ul>
<p>To create the most basic map with the boundaries of African countries we call <code>mapview()</code> function</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="visualising1.html#cb102-1"></a><span class="co"># data(africountries)</span></span>
<span id="cb102-2"><a href="visualising1.html#cb102-2"></a><span class="co"># mapview(africountries)</span></span></code></pre></div>
<p>This map has a number of functions:</p>
<ul>
<li>a layer button to switch between five different layers</li>
<li>scale bar</li>
<li>zoom butttons</li>
<li>data name in the top right corner</li>
</ul>
<p>We can easily fill an interactive map with the colours based on one of the columns. Here we use population column to colours our map. Importantly, when we hoover over specific country the population data for a given country is showed.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="visualising1.html#cb103-1"></a><span class="co">#mapview(africountries, zcol = (&quot;pop_est&quot;))</span></span></code></pre></div>
<p>Similarly, we can control for other features such as line width (lwd), colour of polygons (col.regions). Another important feature that we might want to control is the underlying map which we set with ‘map.types’ argument. The available background maps can be viewed <a href="http://leaflet-extras.github.io/leaflet-providers/preview/">here</a>.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="visualising1.html#cb104-1"></a><span class="co">#mapview(africountries, color = &quot;red&quot;, </span></span>
<span id="cb104-2"><a href="visualising1.html#cb104-2"></a><span class="co">#        lwd = 1.5, col.regions = &quot;white&quot;, map.types = &quot;Esri.WorldShadedRelief&quot;)</span></span></code></pre></div>
<p>Further, mapview allows us to easily build up many layers within a single map. Here, we firstly include countries and then add location of airports. Further a useful option is <code>layer.name</code> which allows us to control the naming of different layers of the map. The specific layers can be controlled and adjusted as showed in the example. In partucular, we set the colour of countries polygons according to the population size. It is possible to use layer button to hide and unhide layers of the map.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="visualising1.html#cb105-1"></a><span class="co"># # simple map with two layers</span></span>
<span id="cb105-2"><a href="visualising1.html#cb105-2"></a><span class="co"># # data(afriairports)</span></span>
<span id="cb105-3"><a href="visualising1.html#cb105-3"></a><span class="co"># mapview(list(africountries,afriairports), layer.name = c(&quot;Countries&quot;, &quot;Airports&quot;))</span></span>
<span id="cb105-4"><a href="visualising1.html#cb105-4"></a><span class="co"># </span></span>
<span id="cb105-5"><a href="visualising1.html#cb105-5"></a><span class="co"># #map with advanced layers options</span></span>
<span id="cb105-6"><a href="visualising1.html#cb105-6"></a><span class="co"># mapview(africountries, zcol = &quot;pop_est&quot;, layer.name = &quot;Population&quot;) +</span></span>
<span id="cb105-7"><a href="visualising1.html#cb105-7"></a><span class="co">#   mapview(afriairports, layer.name = &quot;Airports location&quot; )</span></span></code></pre></div>
<p>The link to full documentation is available in <em>Further resources</em> section.</p>
<div id="exercises-2" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Exercises</h3>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.2.1</strong>: Create a map with two layers: countries and capitals. Fill the country polygons according to income group. Explore the layers button to hide and unhide some of them.</p>
</div>
</div>
</div>
<div id="static-maps-with-tmap" class="section level2">
<h2><span class="header-section-number">5.3</span> Static maps with tmap</h2>
<p>In this section we explore the potential of <code>tmap</code> in creating static maps, which is a flexible, yet user-friendly package. Its syntax is similar to <code>ggplot2</code> (plot-making package), where additional features of the map are simply build up on top of the basic structure. Before we plot the first maps we need to create a dataset called <em>africa</em> and activate static map viewing mode.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="visualising1.html#cb106-1"></a><span class="co"># africa &lt;- ne_countries(continent = &#39;africa&#39;, scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)</span></span>
<span id="cb106-2"><a href="visualising1.html#cb106-2"></a><span class="co"># tmap_mode(&quot;plot&quot;) #activates static map viewing mode</span></span></code></pre></div>
<p>Next, we create an empty contour map of the continent, where <code>tm_shape()</code> function serves as a basic component containing the shape object i.e. our spatial dataset. On top of this basic element we can then add more layers using <code>+</code> operator. The advantage of <code>tmap</code> package is that it offers a large variety layers and these are named relatively intuitively to make the search and use easier. For example, we will now use layer called <code>tm_borders()</code> which defines the borders of the polygons.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="visualising1.html#cb107-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb107-2"><a href="visualising1.html#cb107-2"></a><span class="co">#  tm_borders()</span></span></code></pre></div>
<p>Further, we create an empty, borderless map using <code>tm_fill()</code> which defines the fill of the polygons.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="visualising1.html#cb108-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb108-2"><a href="visualising1.html#cb108-2"></a><span class="co">#  tm_fill()</span></span></code></pre></div>
<p>Intuitively to create a map with both layers, we need to include <code>tm_fill()</code> and <code>tm_borders()</code> simultaneously. Alternatively, <code>tm_polygons()</code> function allows us to achieve exactly the same result more efficiently. It draws the polygons borders and fills them.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="visualising1.html#cb109-1"></a><span class="co"># tm_shape(africa)+ </span></span>
<span id="cb109-2"><a href="visualising1.html#cb109-2"></a><span class="co">#  tm_borders()+</span></span>
<span id="cb109-3"><a href="visualising1.html#cb109-3"></a><span class="co">#   tm_fill()</span></span>
<span id="cb109-4"><a href="visualising1.html#cb109-4"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb109-5"><a href="visualising1.html#cb109-5"></a><span class="co">#  tm_polygons()</span></span></code></pre></div>
<p>We can further develop our map by adjusting different features of the map such as colour and transparency of the map, width and types of the border lines etc. The extra parameters for changing the plot elements can be found <a href="http://publish.illinois.edu/johnrgallagher/files/2015/10/BaseGraphicsCheatsheet.pdf">here</a>.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="visualising1.html#cb110-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb110-2"><a href="visualising1.html#cb110-2"></a><span class="co">#  tm_polygons(col = &quot;green&quot;, lty = &quot;dotted&quot;, alpha = 0.3)</span></span></code></pre></div>
<p>As we already know a basic structure required to build a static map, we can proceed to a more advanced (and useful) example, where we fill the polygons using data on <strong>last census</strong> and adding relevant title to the legend. In this case, we also use <code>legend.format</code>option to format the legend numbers to be treated as years.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="visualising1.html#cb111-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb111-2"><a href="visualising1.html#cb111-2"></a><span class="co">#  tm_polygons(col = &quot;lastcensus&quot;, title = &quot;Year of last census&quot;, legend.format = list(format=&quot;s&quot;))</span></span></code></pre></div>
<p>Further, we can build on the previous map by adding labels for country names with <code>tm_text</code> function. In a similar manner a variety of different layers can be added.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="visualising1.html#cb112-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb112-2"><a href="visualising1.html#cb112-2"></a><span class="co">#  tm_polygons(col = &quot;lastcensus&quot;, title = &quot;Year of last census&quot;, legend.format = list(format=&quot;s&quot;))+</span></span>
<span id="cb112-3"><a href="visualising1.html#cb112-3"></a><span class="co">#  tm_text(&quot;admin&quot;, size = 0.52, fontface = &quot;bold&quot;, auto.placement = TRUE)</span></span></code></pre></div>
<p>Another useful function in <code>tmap</code> is the adjustment of the intervals in the legend, in case the default scale does not provide enough variety. For example, plotting the population of African countries on the map using default intervals (stemming from the data) is not very informative due to to much clustering of information. Instead, we might want to use <code>breaks</code> argument to set them up manually to provide more differentiation visually. For clarity, I set up the customised breaks outside of the map-making function. Alternatively, we can control number of so-called <code>bins</code> (groups) into which the <strong>Population</strong> is divided, by setting <code>n</code> argument to a desired number of bins inside the <code>tm_polygons</code> function.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="visualising1.html#cb113-1"></a><span class="co">#default settings</span></span>
<span id="cb113-2"><a href="visualising1.html#cb113-2"></a><span class="co"># tm_shape(africa)+                                </span></span>
<span id="cb113-3"><a href="visualising1.html#cb113-3"></a><span class="co">#  tm_polygons(col = &quot;pop_est&quot;, title = &quot;Population&quot;)</span></span>
<span id="cb113-4"><a href="visualising1.html#cb113-4"></a><span class="co">#set up breaks manually</span></span>
<span id="cb113-5"><a href="visualising1.html#cb113-5"></a><span class="co"># custom_breaks = c(10, 40, 80, 120, 160, 200, 240, 280, 320) * 100000</span></span>
<span id="cb113-6"><a href="visualising1.html#cb113-6"></a><span class="co"># tm_shape(africa)+                               </span></span>
<span id="cb113-7"><a href="visualising1.html#cb113-7"></a><span class="co">#  tm_polygons(col = &quot;pop_est&quot;, title = &quot;Population&quot;, breaks = custom_breaks)</span></span>
<span id="cb113-8"><a href="visualising1.html#cb113-8"></a><span class="co">#set up a number of bins</span></span>
<span id="cb113-9"><a href="visualising1.html#cb113-9"></a><span class="co"># tm_shape(africa)+                                </span></span>
<span id="cb113-10"><a href="visualising1.html#cb113-10"></a><span class="co">#  tm_polygons(col = &quot;pop_est&quot;, title = &quot;Population&quot;, n = 15)</span></span></code></pre></div>
<p>So far, we used continuous variables to fill the polygons but it is also possible to use categorical variables for this purpose. In the example below <em>income_grp</em> variable is a categorical variable with income level. It allows for visual grouping of countries in the same category. The names of the categories in the legend were adjusted using <code>labels</code> argument. In the similar manner we can show the airports of Africa according to their size.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="visualising1.html#cb114-1"></a><span class="co"># tm_shape(africa)+  </span></span>
<span id="cb114-2"><a href="visualising1.html#cb114-2"></a><span class="co">#   tm_polygons(col = &quot;income_grp&quot;, title = &quot;Income levels&quot;, alpha = 0.6, labels = c(&quot;High&quot;, &quot;Upper middle&quot;, &quot;Lower middle&quot;, &quot;Lower&quot;))</span></span>
<span id="cb114-3"><a href="visualising1.html#cb114-3"></a><span class="co"># </span></span>
<span id="cb114-4"><a href="visualising1.html#cb114-4"></a><span class="co"># data(afriairports)</span></span>
<span id="cb114-5"><a href="visualising1.html#cb114-5"></a><span class="co"># tm_shape(africontinent)+</span></span>
<span id="cb114-6"><a href="visualising1.html#cb114-6"></a><span class="co">#   tm_polygons(col = &quot;lightgrey&quot;)+</span></span>
<span id="cb114-7"><a href="visualising1.html#cb114-7"></a><span class="co"># tm_shape(afriairports)+  </span></span>
<span id="cb114-8"><a href="visualising1.html#cb114-8"></a><span class="co">#   tm_dots(col = &quot;type&quot;, shape = 21, size = 0.2, title = &quot;Airport size&quot;, labels = c(&quot;Large&quot;, &quot;Medium&quot;, &quot;Small&quot;), palette=c(large_airport=&#39;red&#39;, medium_airport=&#39;yellow&#39;, small_airport=&#39;blue&#39;))</span></span></code></pre></div>
<p>It is important to bear in mind that same information can be displayed on the map in many different ways. For example, we can make use of ‘tm_bubbles’ to create so called bubbles which size is linked to the population of each country while their colour related to the income group.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="visualising1.html#cb115-1"></a><span class="co"># tm_shape(africa)+                                </span></span>
<span id="cb115-2"><a href="visualising1.html#cb115-2"></a><span class="co">#  tm_polygons(col = &quot;lightblue&quot;)+</span></span>
<span id="cb115-3"><a href="visualising1.html#cb115-3"></a><span class="co">#   tm_bubbles(size = &quot;pop_est&quot;, col = &quot;income_grp&quot;, title.col = &quot;Income level&quot;, title.size = &quot;Population&quot;)</span></span></code></pre></div>
<div id="colour-setting-and-colour-pallete" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Colour setting and colour pallete</h3>
<p>An important aspect of the maps, as in every visual representation, are the colours. In <code>tmap</code> we can change the default colours using <code>palette</code> argument. In the example below, we used palette called <strong>Set1</strong> and <strong>plasma</strong> and there are many other options to choose from. To view them, we run <code>tmaptools::palette_explorer()</code> which will open a new window with a wide range of palettes. Sliders on the left hand side allow selecting a number of colours.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="visualising1.html#cb116-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb116-2"><a href="visualising1.html#cb116-2"></a><span class="co">#  tm_polygons(col = &quot;lastcensus&quot;, title = &quot;Year of last census&quot;, palette = &quot;Set1&quot;, legend.format = list(format=&quot;s&quot;))</span></span>
<span id="cb116-3"><a href="visualising1.html#cb116-3"></a><span class="co"># </span></span>
<span id="cb116-4"><a href="visualising1.html#cb116-4"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb116-5"><a href="visualising1.html#cb116-5"></a><span class="co">#  tm_polygons(col = &quot;lastcensus&quot;, title = &quot;Year of last census&quot;, palette = &quot;plasma&quot;, legend.format = list(format=&quot;s&quot;))</span></span></code></pre></div>
<p>Alternatively an overall style of a single map can be easily changed using <code>tm_style</code> function. However, it might also be useful to change the style in all the maps in the document. This can be achieved with setting the style globally with <code>tmap_style("nameofthestyle")</code>. The default style is called “white”, hence to restore a default style setting use <code>tmap_style("white")</code>.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="visualising1.html#cb117-1"></a><span class="co"># tm_style(&quot;classic&quot;)+</span></span>
<span id="cb117-2"><a href="visualising1.html#cb117-2"></a><span class="co"># tm_shape(africa)+                                </span></span>
<span id="cb117-3"><a href="visualising1.html#cb117-3"></a><span class="co">#  tm_polygons()+</span></span>
<span id="cb117-4"><a href="visualising1.html#cb117-4"></a><span class="co">#      tm_bubbles(size = &quot;pop_est&quot;, col = &quot;income_grp&quot;, title.col = &quot;Income level&quot;, </span></span>
<span id="cb117-5"><a href="visualising1.html#cb117-5"></a><span class="co">#                 title.size = &quot;Population&quot;, labels = c(&quot;High&quot;, &quot;Upper middle&quot;, &quot;Lower middle&quot;, &quot;Lower&quot;))</span></span>
<span id="cb117-6"><a href="visualising1.html#cb117-6"></a><span class="co"># </span></span>
<span id="cb117-7"><a href="visualising1.html#cb117-7"></a><span class="co"># tm_style(&quot;beaver&quot;)+</span></span>
<span id="cb117-8"><a href="visualising1.html#cb117-8"></a><span class="co"># tm_shape(africa)+                                </span></span>
<span id="cb117-9"><a href="visualising1.html#cb117-9"></a><span class="co">#  tm_polygons()+</span></span>
<span id="cb117-10"><a href="visualising1.html#cb117-10"></a><span class="co">#      tm_bubbles(size = &quot;pop_est&quot;, col = &quot;income_grp&quot;, title.col = &quot;Income level&quot;, </span></span>
<span id="cb117-11"><a href="visualising1.html#cb117-11"></a><span class="co">#                 title.size = &quot;Population&quot;, labels = c(&quot;High&quot;, &quot;Upper middle&quot;, &quot;Lower middle&quot;, &quot;Lower&quot;))</span></span>
<span id="cb117-12"><a href="visualising1.html#cb117-12"></a><span class="co"># </span></span>
<span id="cb117-13"><a href="visualising1.html#cb117-13"></a><span class="co"># tm_style(&quot;albatross&quot;)+</span></span>
<span id="cb117-14"><a href="visualising1.html#cb117-14"></a><span class="co"># tm_shape(africa)+                                </span></span>
<span id="cb117-15"><a href="visualising1.html#cb117-15"></a><span class="co">#  tm_polygons()+</span></span>
<span id="cb117-16"><a href="visualising1.html#cb117-16"></a><span class="co">#      tm_bubbles(size = &quot;pop_est&quot;, col = &quot;income_grp&quot;, title.col = &quot;Income level&quot;, </span></span>
<span id="cb117-17"><a href="visualising1.html#cb117-17"></a><span class="co">#                 title.size = &quot;Population&quot;, labels = c(&quot;High&quot;, &quot;Upper middle&quot;, &quot;Lower middle&quot;, &quot;Lower&quot;))</span></span></code></pre></div>
</div>
<div id="visualising-different-datasets-in-one-map" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Visualising different datasets in one map</h3>
<p><code>tmap</code> not only allows us to add extra layers to a single map by building on a basic structure, but it also enables us to join two separate datasets in a single map. We first create an object called <em>countries</em> which is a map with African countries:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="visualising1.html#cb118-1"></a><span class="co"># #read in data</span></span>
<span id="cb118-2"><a href="visualising1.html#cb118-2"></a><span class="co"># data(africountries)</span></span>
<span id="cb118-3"><a href="visualising1.html#cb118-3"></a><span class="co"># #create an object</span></span>
<span id="cb118-4"><a href="visualising1.html#cb118-4"></a><span class="co"># countries = tm_shape(africountries)+</span></span>
<span id="cb118-5"><a href="visualising1.html#cb118-5"></a><span class="co">#   tm_polygons(col = &quot;lightblue&quot;, alpha = 0.3)</span></span>
<span id="cb118-6"><a href="visualising1.html#cb118-6"></a><span class="co"># #view object called &quot;countries&quot;</span></span>
<span id="cb118-7"><a href="visualising1.html#cb118-7"></a><span class="co"># countries</span></span></code></pre></div>
<p>Then we use it as an argument to merge it with a map containing the location of capitals.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="visualising1.html#cb119-1"></a><span class="co"># #read in data with capitals</span></span>
<span id="cb119-2"><a href="visualising1.html#cb119-2"></a><span class="co"># data(africapitals)</span></span>
<span id="cb119-3"><a href="visualising1.html#cb119-3"></a><span class="co"># #merge two maps</span></span>
<span id="cb119-4"><a href="visualising1.html#cb119-4"></a><span class="co"># countries+</span></span>
<span id="cb119-5"><a href="visualising1.html#cb119-5"></a><span class="co">#   tm_shape(africapitals)+  #uses dataset with capitals</span></span>
<span id="cb119-6"><a href="visualising1.html#cb119-6"></a><span class="co">#     tm_dots(col = &quot;red&quot;, size = 0.15)+       #adds dots on the map</span></span>
<span id="cb119-7"><a href="visualising1.html#cb119-7"></a><span class="co">#       tm_layout(title = &quot;Capital cities of Africa&quot; , title.position = c(&quot;right&quot;, &quot;top&quot;), title.size = 1) #add and adjust map title</span></span></code></pre></div>
</div>
<div id="exercises-3" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Exercises</h3>
<p>The solution to the exercises are provided at the <a href="visualising1.html#solutions_ch5">end of the chapter</a>.</p>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.3.1</strong>: Plot a yellow map of Africa with transparency of 0.4 and solid line borders of width 3.</p>
</div>
<p><br/></p>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.3.2</strong>: Plot a lightblue map of Africa with dotted, non-transparent, red borders.</p>
</div>
<p><br/></p>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.3.3</strong>: Plot a map that has polygons filled with gross domestic product, black borders, legend titled “GDP” and customised breaks at 0, 20000, 30000, 40000, 50000, 100000, 200000, 300000, 500000.</p>
</div>
<p><br/></p>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.3.4</strong>: Create a map with continent contour in light green colour. Then add african highways by using <em>afrihighway</em> dataset. Finally, include a title on the bottom of the map.</p>
</div>
</div>
</div>
<div id="interactive-maps-with-tmap" class="section level2">
<h2><span class="header-section-number">5.4</span> Interactive maps with tmap</h2>
<p><code>tmap</code>package offers versatility not only for creating static maps, as we have seen above, but it also allows for making customised interactive maps conveniently by simply changing the mode of operation from static to dynamic using <em>plot</em> or <em>view</em>, respectively in <code>tmap_mode()</code> function. After the activation of an interactive mode all the maps produced with <code>tmap</code> will be interactive. Therefore, we are able to create all the maps that we have produced so far in an interactive version.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="visualising1.html#cb120-1"></a><span class="co"># #sets interactive mode</span></span>
<span id="cb120-2"><a href="visualising1.html#cb120-2"></a><span class="co"># tmap_mode(&quot;view&quot;)</span></span>
<span id="cb120-3"><a href="visualising1.html#cb120-3"></a><span class="co"># </span></span>
<span id="cb120-4"><a href="visualising1.html#cb120-4"></a><span class="co"># tm_shape(africa)+  </span></span>
<span id="cb120-5"><a href="visualising1.html#cb120-5"></a><span class="co">#   tm_borders()+     </span></span>
<span id="cb120-6"><a href="visualising1.html#cb120-6"></a><span class="co">#     tm_shape(africapitals)+</span></span>
<span id="cb120-7"><a href="visualising1.html#cb120-7"></a><span class="co">#     tm_dots(col = &quot;white&quot;, border.col = &quot;blue&quot;, size = 0.1)+ #capital dots settings</span></span>
<span id="cb120-8"><a href="visualising1.html#cb120-8"></a><span class="co">#     tm_text(&quot;capitalname&quot;)+ #adds capital names</span></span>
<span id="cb120-9"><a href="visualising1.html#cb120-9"></a><span class="co">#         tm_shape(afrihighway)+ </span></span>
<span id="cb120-10"><a href="visualising1.html#cb120-10"></a><span class="co">#     tm_lines(col = &quot;red&quot;, lwd = 2, alpha = 0.7) #highway lines setting</span></span>
<span id="cb120-11"><a href="visualising1.html#cb120-11"></a><span class="co">#     </span></span></code></pre></div>
<p>Regardless of the mode, the creation of maps using <code>tmap</code> package is easy and convenient. The additional feature in the interactive mode is the choice of the background map. This can be set up using function <code>tm_basemap</code>. Available base maps can be accessed using <code>leaflet::providers</code>. They can also be previewed <a href="https://leaflet-extras.github.io/leaflet-providers/preview/">here</a>. In the example below, we use a topographic map of Africa.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="visualising1.html#cb121-1"></a><span class="co"># tm_basemap(&quot;OpenTopoMap&quot;)+</span></span>
<span id="cb121-2"><a href="visualising1.html#cb121-2"></a><span class="co"># tm_shape(africa)+  </span></span>
<span id="cb121-3"><a href="visualising1.html#cb121-3"></a><span class="co">#   tm_borders()+     </span></span>
<span id="cb121-4"><a href="visualising1.html#cb121-4"></a><span class="co">#     tm_shape(africapitals)+</span></span>
<span id="cb121-5"><a href="visualising1.html#cb121-5"></a><span class="co">#     tm_dots(col = &quot;black&quot;)+ #capital dots settings</span></span>
<span id="cb121-6"><a href="visualising1.html#cb121-6"></a><span class="co">#         tm_shape(afrihighway)+ </span></span>
<span id="cb121-7"><a href="visualising1.html#cb121-7"></a><span class="co">#     tm_lines(col = &quot;red&quot;, lwd = 2, alpha = 0.7) #highway lines setting</span></span></code></pre></div>
<div id="visualising-subsets-of-data" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Visualising subsets of data</h3>
<p>Let’s assume that we are only interested in the subset of our data for example a specific country or the location of large airports only. We can achieve it using <code>dplyr</code> package.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="visualising1.html#cb122-1"></a><span class="co"># tmap_mode(&quot;view&quot;)</span></span>
<span id="cb122-2"><a href="visualising1.html#cb122-2"></a><span class="co"># data(afriairports)</span></span>
<span id="cb122-3"><a href="visualising1.html#cb122-3"></a><span class="co"># </span></span>
<span id="cb122-4"><a href="visualising1.html#cb122-4"></a><span class="co"># #take a subset of data</span></span>
<span id="cb122-5"><a href="visualising1.html#cb122-5"></a><span class="co"># large = afriairports %&gt;% filter(type==&quot;large_airport&quot;) </span></span>
<span id="cb122-6"><a href="visualising1.html#cb122-6"></a><span class="co"># </span></span>
<span id="cb122-7"><a href="visualising1.html#cb122-7"></a><span class="co"># #plot the subset</span></span>
<span id="cb122-8"><a href="visualising1.html#cb122-8"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb122-9"><a href="visualising1.html#cb122-9"></a><span class="co">#   tm_borders()+</span></span>
<span id="cb122-10"><a href="visualising1.html#cb122-10"></a><span class="co">#   tm_shape(large)+</span></span>
<span id="cb122-11"><a href="visualising1.html#cb122-11"></a><span class="co">#     tm_dots( col = &quot;red&quot;)</span></span></code></pre></div>
</div>
<div id="exercises-4" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Exercises</h3>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.4.1</strong>: Create an interactive map uses watercolour theme, the highways are blue and dots denoting capitals are white with black borders. Finally, add capitalnames.</p>
</div>
<br/>
<style>
div.purple { background-color:#e9d0f7; border-radius: 5px; padding: 20px;}
</style>
<div class="purple">
<p><strong>Exercise 5.4.2</strong>: Create an interactive map of African countries which have population smaller than 10 million. Fill the polygons with the population size.</p>
</div>
</div>
</div>
<div id="further-resources-2" class="section level2">
<h2><span class="header-section-number">5.5</span> Further resources</h2>
<ul>
<li><a href="https://cran.r-project.org/web/packages/tmap/tmap.pdf">tmap documentation</a></li>
<li><a href="https://r-spatial.github.io/mapview/articles/">Mapview documentation</a></li>
</ul>
</div>
<div id="solutions_ch5" class="section level2">
<h2><span class="header-section-number">5.6</span> Exercise solutions</h2>
<ul>
<li>Exercise 5.2.1</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="visualising1.html#cb123-1"></a><span class="co">#mapview(africountries, zcol = &quot;income_grp&quot;) + mapview(africapitals)</span></span></code></pre></div>
<ul>
<li>Exercise 5.3.1</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="visualising1.html#cb124-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb124-2"><a href="visualising1.html#cb124-2"></a><span class="co">#  tm_polygons(col = &quot;yellow&quot;, lwd = 3, lty = &quot;solid&quot;, alpha = 0.4)</span></span></code></pre></div>
<ul>
<li>Exercise 5.3.2</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="visualising1.html#cb125-1"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb125-2"><a href="visualising1.html#cb125-2"></a><span class="co">#  tm_fill(col = &quot;lightblue&quot;)+</span></span>
<span id="cb125-3"><a href="visualising1.html#cb125-3"></a><span class="co">#  tm_borders(col = &quot;red&quot;, lty = &quot;dotted&quot;, alpha = 1)</span></span></code></pre></div>
<ul>
<li>Exercise 5.3.3</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="visualising1.html#cb126-1"></a><span class="co"># custom_breaks = c(0, 2, 3, 4, 5, 10,20, 30, 50) * 10000</span></span>
<span id="cb126-2"><a href="visualising1.html#cb126-2"></a><span class="co"># tm_shape(africa)+</span></span>
<span id="cb126-3"><a href="visualising1.html#cb126-3"></a><span class="co">#  tm_polygons(col = &quot;gdp_md_est&quot;, title = &quot;GDP&quot;,  breaks = custom_breaks)</span></span></code></pre></div>
<ul>
<li>Exercise 5.3.4</li>
</ul>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="visualising1.html#cb127-1"></a><span class="co"># map_contour = tm_shape(africa)+  </span></span>
<span id="cb127-2"><a href="visualising1.html#cb127-2"></a><span class="co">#   tm_fill(col = &quot;lightgreen&quot;)</span></span>
<span id="cb127-3"><a href="visualising1.html#cb127-3"></a><span class="co"># data(afrihighway)</span></span>
<span id="cb127-4"><a href="visualising1.html#cb127-4"></a><span class="co"># map_contour +</span></span>
<span id="cb127-5"><a href="visualising1.html#cb127-5"></a><span class="co">#   tm_shape(afrihighway)+</span></span>
<span id="cb127-6"><a href="visualising1.html#cb127-6"></a><span class="co">#   tm_lines()+</span></span>
<span id="cb127-7"><a href="visualising1.html#cb127-7"></a><span class="co">#   tm_layout(title = &quot;Highways in Africa&quot;, title.position = c(&quot;center&quot;, &quot;bottom&quot;))</span></span></code></pre></div>
<ul>
<li>Exercise 5.4.1</li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="visualising1.html#cb128-1"></a><span class="co"># tmap_mode(&quot;view&quot;)</span></span>
<span id="cb128-2"><a href="visualising1.html#cb128-2"></a><span class="co"># </span></span>
<span id="cb128-3"><a href="visualising1.html#cb128-3"></a><span class="co"># </span></span>
<span id="cb128-4"><a href="visualising1.html#cb128-4"></a><span class="co"># tm_basemap(&quot;Stamen.Watercolor&quot;)+</span></span>
<span id="cb128-5"><a href="visualising1.html#cb128-5"></a><span class="co"># tm_shape(africa)+  </span></span>
<span id="cb128-6"><a href="visualising1.html#cb128-6"></a><span class="co">#   tm_borders()+     </span></span>
<span id="cb128-7"><a href="visualising1.html#cb128-7"></a><span class="co">#     tm_shape(africapitals)+</span></span>
<span id="cb128-8"><a href="visualising1.html#cb128-8"></a><span class="co">#     tm_dots(col = &quot;white&quot;, border.col = &quot;black&quot;)+ #capital dots settings</span></span>
<span id="cb128-9"><a href="visualising1.html#cb128-9"></a><span class="co">#     tm_text(&quot;capitalname&quot;, size = 1.2)+</span></span>
<span id="cb128-10"><a href="visualising1.html#cb128-10"></a><span class="co">#         tm_shape(afrihighway)+ </span></span>
<span id="cb128-11"><a href="visualising1.html#cb128-11"></a><span class="co">#     tm_lines(col = &quot;blue&quot;, lwd = 3) #highway lines setting</span></span></code></pre></div>
<ul>
<li>Exercise 5.4.2</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="visualising1.html#cb129-1"></a><span class="co"># tmap_mode(&quot;view&quot;)</span></span>
<span id="cb129-2"><a href="visualising1.html#cb129-2"></a><span class="co"># data(africountries)</span></span>
<span id="cb129-3"><a href="visualising1.html#cb129-3"></a><span class="co"># </span></span>
<span id="cb129-4"><a href="visualising1.html#cb129-4"></a><span class="co"># #take a subset of data</span></span>
<span id="cb129-5"><a href="visualising1.html#cb129-5"></a><span class="co"># small = africountries %&gt;% filter(pop_est &lt; 10000000)</span></span>
<span id="cb129-6"><a href="visualising1.html#cb129-6"></a><span class="co"># </span></span>
<span id="cb129-7"><a href="visualising1.html#cb129-7"></a><span class="co"># tm_shape(small)+</span></span>
<span id="cb129-8"><a href="visualising1.html#cb129-8"></a><span class="co">#   tm_polygons(col = &quot;pop_est&quot;)</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-types.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="shiny.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/afrimapr/book-demo/edit/master/05-visualising-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
